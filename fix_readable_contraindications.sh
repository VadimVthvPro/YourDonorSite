#!/bin/bash

echo "üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–õ–ê–®–ö–ò –ù–ê –í–°–Æ –®–ò–†–ò–ù–£, –¢–ï–ö–°–¢ –ß–ò–¢–ê–ï–ú"
echo "=================================================="

SERVER="root@178.172.212.221"

echo ""
echo "üìä –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨:"
echo "  ‚úÖ –ü–ª–∞—à–∫–∏: 1 –∫–æ–ª–æ–Ω–∫–∞ (–Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É)"
echo "  ‚úÖ –¢–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ (–∏–∫–æ–Ω–∫–∞ ‚Üí –∑–∞–≥–æ–ª–æ–≤–æ–∫ ‚Üí —Å–ø–∏—Å–æ–∫)"
echo "  ‚úÖ –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ —É–≤–µ–ª–∏—á–µ–Ω—ã –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏"
echo ""
echo "üìã –®–∞–≥ 1: –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π CSS..."
scp /Users/VadimVthv/Your_donor/website/css/styles.css $SERVER:/opt/tvoydonor/website/css/styles.css

echo ""
echo "üìã –®–∞–≥ 2: –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é CSS –≤ HTML..."
TIMESTAMP=$(date +%s)
ssh $SERVER << ENDSSH
# –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é –≤ HTML —Ñ–∞–π–ª–∞—Ö
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/index.html
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/donor-dashboard.html
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/medcenter-dashboard.html

echo "‚úÖ –í–µ—Ä—Å–∏—è CSS –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞: $TIMESTAMP"
ENDSSH

echo ""
echo "üìã –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º nginx..."
ssh $SERVER << 'ENDSSH'
nginx -t && systemctl reload nginx
echo "‚úÖ Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω"
ENDSSH

echo ""
echo "üìã –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
ssh $SERVER << 'ENDSSH'
echo "--- grid-template-columns (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1fr) ---"
grep -A 8 "@media (max-width: 768px)" /opt/tvoydonor/website/css/styles.css | grep "grid-template-columns:"
echo ""
echo "--- .contra-title font-size (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.95rem) ---"
grep -A 30 "@media (max-width: 768px)" /opt/tvoydonor/website/css/styles.css | grep ".contra-title" -A 3 | grep "font-size"
ENDSSH

echo ""
echo "‚úÖ –ì–û–¢–û–í–û!"
echo ""
echo "üì± –ö–ê–ö –î–û–õ–ñ–ù–û –í–´–ì–õ–Ø–î–ï–¢–¨:"
echo ""
echo "  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê"
echo "  ‚îÇ [üî¥] –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ          ‚Ä¢ –í–ò–ß-–∏–Ω—Ñ–µ–∫—Ü–∏—è ‚Ä¢ –û–Ω–∫–æ–ª–æ–≥–∏—è   ‚îÇ"
echo "  ‚îÇ      –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è    ‚Ä¢ –ë–æ–ª–µ–∑–Ω–∏ –∫—Ä–æ–≤–∏ ‚Ä¢ –°–µ—Ä–¥–µ—á–Ω–æ-  ‚îÇ"
echo "  ‚îÇ      –î–æ–Ω–æ—Ä—Å—Ç–≤–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ  —Å–æ—Å—É–¥–∏—Å—Ç—ã–µ ‚Ä¢ –ù–∞—Ä–∫–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üü°] –í—Ä–µ–º–µ–Ω–Ω—ã–µ           ‚Ä¢ –ì—Ä–∏–ø–ø ‚Ä¢ –û–ø–µ—Ä–∞—Ü–∏–∏ ‚Ä¢ –¢–∞—Ç—É–∏—Ä–æ–≤–∫–∏‚îÇ"
echo "  ‚îÇ      –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è    ‚Ä¢ –ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å               ‚îÇ"
echo "  ‚îÇ      –û—Ç –º–µ—Å—è—Ü–∞ –¥–æ –≥–æ–¥–∞                                 ‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üü¢] –ü–æ—Å–ª–µ –ø—Ä–æ—Ü–µ–¥—É—Ä      ‚Ä¢ –¢–∞—Ç—É–∏—Ä–æ–≤–∫–∏ ‚Ä¢ –ü–∏—Ä—Å–∏–Ω–≥       ‚îÇ"
echo "  ‚îÇ      –ù–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π/–Ω–µ–¥–µ–ª—å                            ‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üîµ] –ü—Ä–∏ –ø—Ä–∏—ë–º–µ –ª–µ–∫–∞—Ä—Å—Ç–≤ ‚Ä¢ –ê–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–∏ ‚Ä¢ –ò–º–º—É–Ω–æ—Å—É–ø—Ä–µ—Å—Å–æ—Ä—ã‚îÇ"
echo "  ‚îÇ      –í—Ä–µ–º–µ–Ω–Ω–æ            ‚Ä¢ –ü—Ä–æ—Ç–∏–≤–æ–≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ       ‚îÇ"
echo "  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò"
echo ""
echo "  ‚úÖ –ö–∞–∂–¥–∞—è –ø–ª–∞—à–∫–∞ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞"
echo "  ‚úÖ –í–Ω—É—Ç—Ä–∏ –ø–ª–∞—à–∫–∏: [–ò–ö–û–ù–ö–ê] [–ó–ê–ì–û–õ–û–í–û–ö] [‚Ä¢ —Å–ø–∏—Å–æ–∫ ‚Ä¢ —ç–ª–µ–º–µ–Ω—Ç–æ–≤]"
echo "  ‚úÖ –¢–µ–∫—Å—Ç –∫—Ä—É–ø–Ω–µ–µ –∏ —á–∏—Ç–∞–µ–º—ã–π"
echo ""
echo "üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ https://tvoydonor.by –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ"
echo "2. –ñ—ë—Å—Ç–∫–æ –æ–±–Ω–æ–≤–∏—Ç–µ: Cmd+Shift+R (iOS) / Ctrl+Shift+R (Android)"
echo "3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ '–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è'"
echo "4. ‚úÖ –ü–ª–∞—à–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É, —Ç–µ–∫—Å—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ"
echo ""
echo "–í–µ—Ä—Å–∏—è CSS: $TIMESTAMP"
EOF

chmod +x /Users/VadimVthv/Your_donor/fix_readable_contraindications.sh
