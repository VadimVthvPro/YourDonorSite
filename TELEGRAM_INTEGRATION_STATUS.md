# ‚úÖ Telegram –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –ó–ê–í–ï–†–®–ï–ù–û

## –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤

‚úÖ **Flask API** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://127.0.0.1:5001`  
‚úÖ **Telegram –±–æ—Ç** (`bot_debug.py`) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç, polling –∞–∫—Ç–∏–≤–µ–Ω  
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ OK

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üîê –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3.1: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**Flow –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:**

1. ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç–µ**
   - Endpoint: `GET /api/donor/telegram/link-code`
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 10 –º–∏–Ω—É—Ç
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `telegram_link_codes`

2. ‚úÖ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Å–∞–π—Ç–µ** (`website/pages/donor-dashboard.html`)
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏"
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫—Ä–∞—Å–∏–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ (10:00 ‚Üí 0:00)
   - –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. ‚úÖ **–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥** (`telegram_bot.py`)
   - –ö–æ–º–∞–Ω–¥–∞: `/link –ö–û–î`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
   - –ü—Ä–∏–≤—è–∑–∫–∞ `user_id ‚Üî telegram_id`
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

4. ‚úÖ **–ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**
   - Endpoint: `GET /api/donor/telegram/status`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ "‚úÖ Telegram –ø—Ä–∏–≤—è–∑–∞–Ω"
   - –ö–Ω–æ–ø–∫–∞ –æ—Ç–≤—è–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

5. ‚úÖ **–û—Ç–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞**
   - Endpoint: `POST /api/donor/telegram/unlink`
   - –£–¥–∞–ª–µ–Ω–∏–µ `telegram_id` –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI

### üì± –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3.2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `urgent`**
- –¢—Ä–∏–≥–≥–µ—Ä: –º–µ–¥—Ü–µ–Ω—Ç—Ä –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫—Ä–æ–≤–∏ –Ω–∞ `urgent` –≤ —Å–≤–µ—Ç–æ—Ñ–æ—Ä–µ
- –§—É–Ω–∫—Ü–∏—è: `send_urgent_blood_request()` –≤ `telegram_bot.py`
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –¥–æ–Ω–æ—Ä–æ–≤ —Å –ø–æ–¥—Ö–æ–¥—è—â–µ–π –≥—Ä—É–ø–ø–æ–π –∫—Ä–æ–≤–∏
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram API

‚úÖ **–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
üö® –°–†–û–ß–ù–û! –ù—É–∂–Ω–∞ –∫—Ä–æ–≤—å!

ü©∏ –ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏: [—Ç–∏–ø]
üè• –ú–µ–¥—Ü–µ–Ω—Ç—Ä: [–Ω–∞–∑–≤–∞–Ω–∏–µ]
üìç –ê–¥—Ä–µ—Å: [–∞–¥—Ä–µ—Å]

‚è∞ –≠—Ç–æ —Å—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å!

–ï—Å–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–æ—á—å, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
üåê http://localhost:8000
```

‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–¥—Å—á—ë—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–ø–∏—Å–æ–∫ –¥–æ–Ω–æ—Ä–æ–≤ –±–µ–∑ Telegram
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏

### üîç –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3.3: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:**

‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞**
- –¢–æ–∫–µ–Ω: –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–∏–∑ .env)
- –†–µ–∂–∏–º: polling (–Ω–µ webhook)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `your_donor`
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: —É—Å–ø–µ—à–Ω–æ–µ

‚úÖ **–ü—Ä–∞–≤–∞ –±–æ—Ç–∞**
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–∏—ë–º –∫–æ–º–∞–Ω–¥: —Ä–∞–±–æ—Ç–∞–µ—Ç  
- HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/terminals/4.txt`
- –£—Ä–æ–≤–µ–Ω—å: INFO
- –§–æ—Ä–º–∞—Ç: timestamp + user + action

‚úÖ **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–∞**
```
2026-01-23 08:51:42 - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2026-01-23 08:51:43 - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 954467391 (–í–∞–¥–∏–∫) –∑–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞
2026-01-23 08:51:43 - sendMessage "HTTP/1.1 200 OK"
```

## üé® –°—Ç–∏–ª–∏ –∏ UX

**–î–æ–±–∞–≤–ª–µ–Ω—ã CSS –∫–ª–∞—Å—Å—ã** (`website/css/styles.css`):

```css
.telegram-code-display    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–¥–∞ */
.code-box                 /* –§–ª–µ–∫—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–¥ + –∫–Ω–æ–ø–∫–∞ */
.telegram-code            /* –ö—Ä—É–ø–Ω—ã–π –∫–æ–¥ —Å –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º */
.btn-copy                 /* –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è */
.code-timer               /* –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ */
.telegram-instructions    /* –ë–ª–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */
.btn-block                /* –ö–Ω–æ–ø–∫–∞ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
```

**JavaScript —Ñ—É–Ω–∫—Ü–∏–∏** (`website/js/donor-dashboard.js`):

- `startCodeTimer(seconds)` ‚Äî —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞
- `checkTelegramLinkStatus()` ‚Äî –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- `updateTelegramStatus(linked, username)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤—è–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–í—Å–µ–≥–æ –∑–∞–¥–∞—á:** 5  
**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 5 (100%)

- ‚úÖ 3.1.1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç–µ
- ‚úÖ 3.1.2: –ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥
- ‚úÖ 3.1.3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ
- ‚úÖ 3.2: –°—Ä–æ—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ 3.3: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –¥–æ–Ω–æ—Ä–∞:

1. –í–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–æ–Ω–æ—Ä–∞
2. –û—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"
3. –ù–∞–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É "–ü—Ä–∏–≤—è–∑–∫–∞ Telegram"
4. –ù–∞–∂–∞—Ç—å "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏"
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
6. –û—Ç–∫—Ä—ã—Ç—å Telegram ‚Üí –Ω–∞–π—Ç–∏ @your_donor_bot
7. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É: `/link –ö–û–î`
8. –ì–æ—Ç–æ–≤–æ! –ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### –î–ª—è –º–µ–¥—Ü–µ–Ω—Ç—Ä–∞:

1. –í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å –º–µ–¥—Ü–µ–Ω—Ç—Ä–∞
2. –û—Ç–∫—Ä—ã—Ç—å "–î–æ–Ω–æ—Ä—Å–∫–∏–π —Å–≤–µ—Ç–æ—Ñ–æ—Ä"
3. –í—ã–±—Ä–∞—Ç—å –≥—Ä—É–ø–ø—É –∫—Ä–æ–≤–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–°—Ä–æ—á–Ω–æ"
4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –°–æ–∑–¥–∞—Å—Ç –∑–∞–ø—Ä–æ—Å –∫—Ä–æ–≤–∏
   - –û—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º –¥–æ–Ω–æ—Ä–∞–º —Å –Ω—É–∂–Ω–æ–π –≥—Ä—É–ø–ø–æ–π

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–∞—Ä–æ–ª—å PostgreSQL** ‚Äî –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä—è–º—ã—Ö psql –∫–æ–º–∞–Ω–¥
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python API —á–µ—Ä–µ–∑ Flask

2. **URL –±–æ—Ç–∞ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö** ‚Äî —Ö–∞—Ä–¥–∫–æ–¥ `@your_donor_bot`
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ .env –∫–∞–∫ `TELEGRAM_BOT_USERNAME`

3. **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞** ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π 10 –º–∏–Ω—É—Ç
   - –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —á–µ—Ä–µ–∑ .env

## ‚ú® –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ —Ç—Ä–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (1, 2, 3) –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.
–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫—Ä–æ–≤–∏, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –∏ Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç.
