#!/bin/bash

echo "üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–ª–∞—à–∫–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ (2 –≤ —Ä—è–¥)"
echo "================================================"

SERVER="root@178.172.212.221"

echo ""
echo "üìã –®–∞–≥ 1: –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π CSS..."
scp /Users/VadimVthv/Your_donor/website/css/styles.css $SERVER:/opt/tvoydonor/website/css/styles.css

echo ""
echo "üìã –®–∞–≥ 2: –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é CSS –≤ HTML..."
TIMESTAMP=$(date +%s)
ssh $SERVER << ENDSSH
# –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é –≤ HTML —Ñ–∞–π–ª–∞—Ö
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/index.html
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/donor-dashboard.html
sed -i "s|styles\.css?v=[0-9]*|styles.css?v=$TIMESTAMP|g" /opt/tvoydonor/website/medcenter-dashboard.html

echo "‚úÖ –í–µ—Ä—Å–∏—è CSS –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞: $TIMESTAMP"
ENDSSH

echo ""
echo "üìã –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º nginx..."
ssh $SERVER << 'ENDSSH'
nginx -t && systemctl reload nginx
echo "‚úÖ Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω"
ENDSSH

echo ""
echo "üìã –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å..."
ssh $SERVER << 'ENDSSH'
echo "--- .contra-grid –≤ @media (max-width: 768px) ---"
grep -A 8 "@media (max-width: 768px)" /opt/tvoydonor/website/css/styles.css | grep -A 5 ".contra-grid {"
ENDSSH

echo ""
echo "‚úÖ –ì–û–¢–û–í–û!"
echo ""
echo "üì± –ö–ê–ö –î–û–õ–ñ–ù–û –í–´–ì–õ–Ø–î–ï–¢–¨:"
echo ""
echo "  –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ (480px - 768px):"
echo "  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê"
echo "  ‚îÇ [üî¥] –ü–ª–∞—à–∫–∞ 1‚îÇ [üü°] –ü–ª–∞—à–∫–∞ 2‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üü¢] –ü–ª–∞—à–∫–∞ 3‚îÇ [üîµ] –ü–ª–∞—à–∫–∞ 4‚îÇ"
echo "  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò"
echo ""
echo "  –ù–∞ –º–∞–ª–µ–Ω—å–∫–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ (<480px):"
echo "  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê"
echo "  ‚îÇ [üî¥] –ü–ª–∞—à–∫–∞ 1‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üü°] –ü–ª–∞—à–∫–∞ 2‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üü¢] –ü–ª–∞—à–∫–∞ 3‚îÇ"
echo "  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§"
echo "  ‚îÇ [üîµ] –ü–ª–∞—à–∫–∞ 4‚îÇ"
echo "  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò"
echo ""
echo "üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ https://tvoydonor.by –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ"
echo "2. –ñ—ë—Å—Ç–∫–æ –æ–±–Ω–æ–≤–∏—Ç–µ: Cmd+Shift+R (iOS) / Ctrl+Shift+R (Android)"
echo "3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ '–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è'"
echo "4. ‚úÖ –ü–ª–∞—à–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ 2 –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞ –æ–±—ã—á–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ)"
echo ""
echo "–í–µ—Ä—Å–∏—è CSS: $TIMESTAMP"
