# üîÑ –£–õ–£–ß–®–ï–ù–ò–ï –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –ß–ï–†–ï–ó TELEGRAM

## üìã –¢–ï–ö–£–©–ò–ï –ü–†–û–ë–õ–ï–ú–´:

1. ‚ùå –ù–µ –ø–æ–Ω—è—Ç–Ω–æ –Ω–∞—Ç–∏–≤–Ω–æ —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å
2. ‚ùå –ù–µ—Ç –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–æ—Ç–∞
3. ‚ùå –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
4. ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏

## ‚úÖ –†–ï–®–ï–ù–ò–ï:

### 1. –ù–û–í–´–ô –ü–†–û–¶–ï–°–° –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò:

```
–®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ
  ‚îú‚îÄ –§–ò–û
  ‚îú‚îÄ –ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è
  ‚îú‚îÄ –ú–µ–¥—Ü–µ–Ω—Ç—Ä
  ‚îú‚îÄ –ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏
  ‚îî‚îÄ –ü–∞—Ä–æ–ª—å

–®–∞–≥ 2: –°–∞–π—Ç —Å–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
  ‚îî‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

–®–∞–≥ 3: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  ‚îú‚îÄ –ë–æ–ª—å—à–æ–π 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫)
  ‚îú‚îÄ –ö–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å @BloodCollection_bot"
  ‚îú‚îÄ –ü–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
  ‚îî‚îÄ –°—Ç–∞—Ç—É—Å: "–û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏..."

–®–∞–≥ 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞
  ‚îú‚îÄ –ù–∞–∂–∏–º–∞–µ—Ç /start
  ‚îú‚îÄ –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç: "–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥"
  ‚îî‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥

–®–∞–≥ 5: –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É
  ‚îî‚îÄ "‚úÖ Telegram —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω!"

–®–∞–≥ 6: –°–∞–π—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É
  ‚îú‚îÄ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: "‚úÖ –£—Å–ø–µ—à–Ω–æ!"
  ‚îú‚îÄ –ê–Ω–∏–º–∞—Ü–∏—è —É—Å–ø–µ—Ö–∞
  ‚îî‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```

### 2. UI –ö–û–ú–ü–û–ù–ï–ù–¢–´:

#### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–≤—è–∑–∫–∏ Telegram:

```html
<div class="telegram-modal">
  <div class="telegram-modal-content">
    <h2>üì± –ü—Ä–∏–≤—è–∂–∏—Ç–µ Telegram</h2>
    <p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ä–æ—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫—Ä–æ–≤–∏</p>
    
    <div class="verification-code-display">
      <div class="code-label">–í–∞—à –∫–æ–¥:</div>
      <div class="code-number">123 456</div>
      <button class="copy-code-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
    
    <div class="telegram-instructions">
      <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
      <ol>
        <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞</li>
        <li>–ù–∞–∂–º–∏—Ç–µ START / –°–¢–ê–†–¢</li>
        <li>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤—ã—à–µ</li>
        <li>–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</li>
      </ol>
    </div>
    
    <a href="https://t.me/BloodCollection_bot?start" class="btn btn-telegram">
      <svg><!-- Telegram icon --></svg>
      –û—Ç–∫—Ä—ã—Ç—å @BloodCollection_bot
    </a>
    
    <div class="verification-status">
      <div class="spinner"></div>
      <span>–û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏...</span>
    </div>
  </div>
</div>
```

### 3. –õ–û–ì–ò–ö–ê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –í–•–û–î–ê:

```javascript
// –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
async function startTelegramVerification(userId, verificationCode) {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–æ–¥–æ–º
    showTelegramModal(verificationCode);
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º polling –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–≤—è–∑–∫–∏
    const pollInterval = setInterval(async () => {
        const response = await fetch(`/api/donor/check-telegram-verified/${userId}`);
        const data = await response.json();
        
        if (data.telegram_verified) {
            clearInterval(pollInterval);
            showSuccessAnimation();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
            setTimeout(() => {
                localStorage.setItem('auth_token', data.token);
                localStorage.setItem('user_type', 'donor');
                window.location.href = 'donor-dashboard.html';
            }, 1500);
        }
    }, 2000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
}
```

### 4. –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ë–û–¢–ï:

```python
@bot.message_handler(commands=['start'])
def start_command(message):
    bot.send_message(
        message.chat.id,
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –¥–æ–Ω–æ—Ä—Å—Ç–≤–∞ –∫—Ä–æ–≤–∏!\n\n"
        "üìù –í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã:"
    )

@bot.message_handler(func=lambda m: m.text.isdigit() and len(m.text) == 6)
def verify_code(message):
    code = message.text
    telegram_id = message.from_user.id
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥ –≤ –ë–î
    user = verify_telegram_code(code, telegram_id)
    
    if user:
        bot.send_message(
            message.chat.id,
            "‚úÖ Telegram —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω!\n\n"
            f"–ü—Ä–∏–≤–µ—Ç, {user['full_name']}! –¢–µ–ø–µ—Ä—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å "
            "—Å—Ä–æ—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫—Ä–æ–≤–∏."
        )
    else:
        bot.send_message(
            message.chat.id,
            "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –Ω–∞ —Å–∞–π—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
        )
```

### 5. BACKEND API:

```python
@app.route('/api/donor/check-telegram-verified/<int:user_id>', methods=['GET'])
def check_telegram_verified(user_id):
    user = query_db(
        "SELECT telegram_id, telegram_username FROM users WHERE id = %s",
        (user_id,), one=True
    )
    
    if user and user['telegram_id']:
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞
        token = generate_auth_token(user_id, 'donor')
        return jsonify({
            'telegram_verified': True,
            'token': token
        })
    
    return jsonify({'telegram_verified': False})
```

## üìä –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ì–û –ü–û–î–•–û–î–ê:

‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
‚úÖ –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞
‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
‚úÖ –ö—Ä—É–ø–Ω—ã–π –∫–æ–¥ (–ª–µ–≥–∫–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å)
‚úÖ –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (—É–¥–æ–±–Ω–æ)
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏
‚úÖ –ü–ª–∞–≤–Ω—ã–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ —É—Å–ø–µ—Ö–∞

## üé® –î–ò–ó–ê–ô–ù:

- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–≤–µ—Ä—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è –∫–æ–¥–∞ (48px)
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏–Ω–Ω–µ—Ä "–æ–∂–∏–¥–∞–Ω–∏–µ"
- –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
- –¶–≤–µ—Ç–∞ Telegram (—Å–∏–Ω–∏–π #0088cc)
- –ò–∫–æ–Ω–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

